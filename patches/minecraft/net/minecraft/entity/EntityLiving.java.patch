--- ../src-base/minecraft/net/minecraft/entity/EntityLiving.java
+++ ../src-work/minecraft/net/minecraft/entity/EntityLiving.java
@@ -54,6 +54,19 @@
 import net.minecraftforge.fml.relauncher.Side;
 import net.minecraftforge.fml.relauncher.SideOnly;
 
+import org.bukkit.craftbukkit.entity.CraftLivingEntity;
+import org.bukkit.event.entity.EntityTargetEvent;
+import org.bukkit.event.entity.EntityTargetLivingEntityEvent;
+
+// CraftBukkit start
+import org.bukkit.craftbukkit.event.CraftEventFactory;
+import org.bukkit.craftbukkit.entity.CraftLivingEntity;
+import org.bukkit.event.entity.EntityTargetLivingEntityEvent;
+import org.bukkit.event.entity.EntityTargetEvent;
+import org.bukkit.event.entity.EntityUnleashEvent;
+import org.bukkit.event.entity.EntityUnleashEvent.UnleashReason;
+// CraftBukkit end
+
 public abstract class EntityLiving extends EntityLivingBase
 {
     private static final DataParameter<Byte> field_184654_a = EntityDataManager.<Byte>func_187226_a(EntityLiving.class, DataSerializers.field_187191_a);
@@ -64,16 +77,16 @@
     protected EntityJumpHelper field_70767_i;
     private EntityBodyHelper field_70762_j;
     protected PathNavigate field_70699_by;
-    public final EntityAITasks field_70714_bg;
-    public final EntityAITasks field_70715_bh;
+    public EntityAITasks field_70714_bg;
+    public EntityAITasks field_70715_bh;
     private EntityLivingBase field_70696_bz;
     private EntitySenses field_70723_bA;
     private ItemStack[] field_184656_bv = new ItemStack[2];
     protected float[] field_82174_bp = new float[2];
     private ItemStack[] field_184657_bw = new ItemStack[4];
-    protected float[] field_184655_bs = new float[4];
-    private boolean field_82172_bs;
-    private boolean field_82179_bU;
+    public float[] field_184655_bs = new float[4];
+    public boolean field_82172_bs;
+    public boolean field_82179_bU;
     private Map<PathNodeType, Float> field_184658_bz = Maps.newEnumMap(PathNodeType.class);
     private ResourceLocation field_184659_bA;
     private long field_184653_bB;
@@ -173,9 +186,43 @@
 
     public void func_70624_b(@Nullable EntityLivingBase p_70624_1_)
     {
-        this.field_70696_bz = p_70624_1_;
-        net.minecraftforge.common.ForgeHooks.onLivingSetAttackTarget(this, p_70624_1_);
+        //this.attackTarget = entitylivingbaseIn;
+        //net.minecraftforge.common.ForgeHooks.onLivingSetAttackTarget(this, entitylivingbaseIn);
+    	//}
+    	// CraftBukkit start - fire event
+    	this.setGoalTarget(p_70624_1_, EntityTargetEvent.TargetReason.UNKNOWN, true);
     }
+    
+    public boolean setGoalTarget(EntityLivingBase entityliving, EntityTargetEvent.TargetReason reason, boolean fireEvent) {
+    	if (func_70638_az() == entityliving) return false;
+    	if (fireEvent) {
+    		if (reason == EntityTargetEvent.TargetReason.UNKNOWN && func_70638_az() != null && entityliving == null) {
+    			reason = func_70638_az().func_70089_S() ? EntityTargetEvent.TargetReason.FORGOT_TARGET : EntityTargetEvent.TargetReason.TARGET_DIED;
+    		}
+    		if (reason == EntityTargetEvent.TargetReason.UNKNOWN) {
+    			field_70170_p.getServer().getLogger().log(java.util.logging.Level.WARNING, "Unknown target reason, please report on the issue tracker", new Exception());
+    		}
+    		CraftLivingEntity ctarget = null;
+    		if (entityliving != null) {
+    			ctarget = (CraftLivingEntity) entityliving.getBukkitEntity();
+    		}
+    		EntityTargetLivingEntityEvent event = new EntityTargetLivingEntityEvent(this.getBukkitEntity(), ctarget, reason);
+    		field_70170_p.getServer().getPluginManager().callEvent(event);
+    		if (event.isCancelled()) {
+    			return false;
+    		}
+    
+    		if (event.getTarget() != null) {
+    			entityliving = ((CraftLivingEntity) event.getTarget()).getHandle();
+    		} else {
+    			entityliving = null;
+    		}
+    	}
+    	this.field_70696_bz = entityliving;
+    	net.minecraftforge.common.ForgeHooks.onLivingSetAttackTarget(this, entityliving);
+    	return true;
+    	// CraftBukkit end
+    }
 
     public boolean func_70686_a(Class <? extends EntityLivingBase > p_70686_1_)
     {
