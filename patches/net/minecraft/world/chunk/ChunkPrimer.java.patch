--- ../src-base/minecraft/net/minecraft/world/chunk/ChunkPrimer.java
+++ ../src-work/minecraft/net/minecraft/world/chunk/ChunkPrimer.java
@@ -8,6 +8,8 @@
 {
     private static final IBlockState field_177859_b = Blocks.field_150350_a.func_176223_P();
     private final char[] field_177860_a = new char[65536];
+    //public byte emptyLevels = 0;
+    public short maxY = 0;
 
     public IBlockState func_177856_a(int p_177856_1_, int p_177856_2_, int p_177856_3_)
     {
@@ -18,7 +20,17 @@
     public void func_177855_a(int p_177855_1_, int p_177855_2_, int p_177855_3_, IBlockState p_177855_4_)
     {
         this.field_177860_a[func_186137_b(p_177855_1_, p_177855_2_, p_177855_3_)] = (char)Block.field_176229_d.func_148747_b(p_177855_4_);
+        //emptyLevels = (byte) (emptyLevels | (0x1 << (y >>> 4)));
+        if(p_177855_2_ > maxY) {
+        	maxY = (short) p_177855_2_;
+        }
     }
+    
+    /** 0 - 15 **/
+    public boolean ebsIsMaybeEmpty(int y) {
+    	//return ((emptyLevels >> y) & 0x1) == 0;
+    	return (maxY >> 4) < y;
+    }
 
     private static int func_186137_b(int p_186137_0_, int p_186137_1_, int p_186137_2_)
     {
@@ -28,8 +40,14 @@
     public int func_186138_a(int p_186138_1_, int p_186138_2_)
     {
         int i = (p_186138_1_ << 12 | p_186138_2_ << 8) + 256 - 1;
-
-        for (int j = 255; j >= 0; --j)
+        //int y = 255;
+        //for(int h = 15; h >= 0; h++) {
+        //	if(((emptyLevels >>> h) & 0x1) == 1) {
+        //		y = h * 16;
+        //	}
+        //}
+        
+        for (int j = maxY; j >= 0; --j)
         {
             IBlockState iblockstate = (IBlockState)Block.field_176229_d.func_148745_a(this.field_177860_a[i + j]);
 
