--- ../src-base/minecraft/net/minecraft/world/border/WorldBorder.java
+++ ../src-work/minecraft/net/minecraft/world/border/WorldBorder.java
@@ -2,10 +2,14 @@
 
 import com.google.common.collect.Lists;
 import java.util.List;
+
+import org.bukkit.craftbukkit.util.LongHash;
+
 import net.minecraft.entity.Entity;
 import net.minecraft.util.math.AxisAlignedBB;
 import net.minecraft.util.math.BlockPos;
 import net.minecraft.util.math.ChunkPos;
+import net.minecraft.world.WorldServer;
 import net.minecraftforge.fml.relauncher.Side;
 import net.minecraftforge.fml.relauncher.SideOnly;
 
@@ -23,6 +27,7 @@
     private double field_177760_j;
     private int field_177761_k;
     private int field_177759_l;
+    public WorldServer world; // CraftBukkit
 
     public WorldBorder()
     {
@@ -39,10 +44,21 @@
         return (double)(p_177746_1_.func_177958_n() + 1) > this.func_177726_b() && (double)p_177746_1_.func_177958_n() < this.func_177728_d() && (double)(p_177746_1_.func_177952_p() + 1) > this.func_177736_c() && (double)p_177746_1_.func_177952_p() < this.func_177733_e();
     }
 
-    public boolean func_177730_a(ChunkPos p_177730_1_)
-    {
-        return (double)p_177730_1_.func_180332_e() > this.func_177726_b() && (double)p_177730_1_.func_180334_c() < this.func_177728_d() && (double)p_177730_1_.func_180330_f() > this.func_177736_c() && (double)p_177730_1_.func_180333_d() < this.func_177733_e();
+    ///public boolean contains(ChunkPos range)
+    //{
+    //    return (double)range.getXEnd() > this.minX() && (double)range.getXStart() < this.maxX() && (double)range.getZEnd() > this.minZ() && (double)range.getZStart() < this.maxZ();
+    //} // CB start
+    public boolean func_177730_a(final ChunkPos p_177730_1_) {
+        return this.isInBounds(p_177730_1_.field_77276_a, p_177730_1_.field_77275_b);
     }
+    
+    public boolean isInBounds(final long chunkcoords) {
+        return this.isInBounds(LongHash.msw(chunkcoords), LongHash.lsw(chunkcoords));
+    }
+    
+    public boolean isInBounds(final int x, final int z) {
+        return (x << 4) + 15 > this.func_177726_b() && x << 4 < this.func_177728_d() && (z << 4) + 15 > this.func_177736_c() && x << 4 < this.func_177733_e();
+    } // CB end
 
     public boolean func_177743_a(AxisAlignedBB p_177743_1_)
     {
@@ -199,6 +215,7 @@
 
     public void func_177737_a(IBorderListener p_177737_1_)
     {
+    	if(this.field_177758_a.contains(p_177737_1_))
         this.field_177758_a.add(p_177737_1_);
     }
 
